<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  <title>Workflow for keeping 8-Ball Scores</title>
  <meta name="description" content="My incredibly unnecessary 'solution' to keeping track of iMessage 8-Ball scores with Workflow.">

	<link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://0.0.0.0:4000/pool-scores-old">
  <link rel="alternate" type="application/rss+xml" title="Thoughts and Stuff" href="http://0.0.0.0:4000/feed.xml">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89653104-1', 'auto');
  ga('send', 'pageview');

</script>

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Thoughts and Stuff</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
        	
        
        	
        
        	
        
        	
          
          <a class="page-link" href="/about">About</a>
          	
          
        
        	
          
          <a class="page-link" href="/archives">Archives</a>
          	
          
        
        	
          
          <a class="page-link" href="/#footer">Contact</a>
          	
          
        
        	
        
        	
        
        	
        
        	
        
        	
        
        	
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Workflow for keeping 8-Ball Scores</h1>
    <p class="post-meta"><time datetime="2017-04-25T00:00:00-04:00" itemprop="datePublished">Apr 25, 2017</time> • <span> <span class = "reading-time" title = "Estimated read time">
	
 	
  		5 mins
  	
</span>
   </span> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Karan Varindani</span></span></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I’d wager that <a href="https://itunes.apple.com/us/app/gamepigeon/id1124197642?mt=8&amp;uo=4&amp;at=10l6nh">GamePigeon</a>’s 8-Ball is the most used iMessage app out there. It feels like everyone (myself included) plays it. But how do we go about keeping score?<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> I used to type the score after every game but after forgetting / losing track a couple of times, I decided to build a <a href="https://itunes.apple.com/us/app/workflow-powerful-automation-made-simple/id915249334?mt=8&amp;uo=4&amp;at=10l6nh">Workflow</a> to semi-automate the process.</p>

<h2 id="getting-started">Getting started</h2>
<p>Other than the <a href="https://itunes.apple.com/us/app/gamepigeon/id1124197642?mt=8&amp;uo=4&amp;at=10l6nh">GamePigeon</a> and <a href="https://itunes.apple.com/us/app/workflow-powerful-automation-made-simple/id915249334?mt=8&amp;uo=4&amp;at=10l6nh">Workflow</a> apps (both free on the App Store), you’ll need both of the following workflows: <a href="https://workflow.is/workflows/3b7f492e4b8946e68cbf03ce827818dc">New Pool Opponent</a> and <a href="https://workflow.is/workflows/6733c1a06cae429683fd94d9aedd38e8">Pool Scores</a>.</p>

<p>The first thing you do is run <code class="highlighter-rouge">New Pool Opponent</code>, which is a Normal workflow (it only shows up in the Workflow app, not the widget). It’ll ask for your name the first time you run it. The workflow will then ask for the name of your opponent and ask you if you want to initialize scores. If you say yes, you can set the score to what your current scores are. If not, it’ll set the score to 0-0. Repeat this for each of your opponents. It’ll save your scores as <code class="highlighter-rouge">'Pool Scores'</code> in Workflow’s iCloud Drive directory.</p>

<p>Next, run <code class="highlighter-rouge">Pool Scores</code> and enter your name <strong>exactly as you did above</strong>. It’ll grab the <code class="highlighter-rouge">'Pool Scores'</code> file and ask you to select a name from your list of opponents, and then ask if you won, lost, or just want to get the score. If you choose won or lost, it’ll update the score accordingly and then get the score (it both displays the score and copies it to clipboard in case you want to send it to your opponent).</p>

<p>The <code class="highlighter-rouge">Pool Scores</code> workflow is a Today Widget (and Apple Watch) workflow so after every game, you can just swipe down to bring up Notification Center and update scores from there.</p>

<p>Read on below for a more detailed documentation of how the workflows work.</p>

<hr />

<h2 id="how-does-it-work-documentation">How does it work? (Documentation)</h2>
<p>Each workflow has one Import Question. Enter your name here. Expected input is text <code class="highlighter-rouge">myname</code> with no white-space (e.g. Karan), but anything works (so long as you enter it exactly the same in both workflows).</p>

<p>Both workflows rely on a dictionary file in Workflow’s iCloud Drive directory. By default, this is read and written as <code class="highlighter-rouge">Pool Scores.json</code>. You can change it by manually changing the name in both workflows (it is referenced twice in <code class="highlighter-rouge">New Pool Opponent</code> and five times in <code class="highlighter-rouge">Pool Scores</code>).</p>

<h3 id="new-pool-opponent">New Pool Opponent</h3>
<p>This is a fairly simple workflow. It either adds or updates key-value pairs in an existing dictionary, or it creates a new dictionary with the given key-value pair. It works as follows.</p>

<ol>
  <li>The workflow asks for your opponent’s name. Expected input is text <code class="highlighter-rouge">opponentname</code> with no white-space (e.g. James), but anything works.</li>
  <li>The workflow asks if you want to initialize scores. If yes, expected input is number. Enter your score and your opponent’s score where prompted. If no, scores are assigned as 0-0.</li>
  <li>The workflow gets the <code class="highlighter-rouge">Pool Scores</code> dictionary file from Workflow’s iCloud Drive directory, and gets the dictionary from the file. If the file doesn’t exist (for example, if you’re running the workflow for the first time) it’ll be created later.</li>
  <li>The workflow sets the dictionary value for you and for your opponent. It does this with keys <code class="highlighter-rouge">mynameopponentname</code> and <code class="highlighter-rouge">opponentname</code>  with values <code class="highlighter-rouge">myscore</code> and <code class="highlighter-rouge">opponentscore</code> respectively (e.g. {“KaranJames”:100, “James”:0}). If these names already exist in the dictionary, they will be overwritten.</li>
  <li>The workflow saves the dictionary to the <code class="highlighter-rouge">Pool Scores</code> file in Workflow’s iCloud Drive directory. If the file exists (for example, if you’re adding a new opponent or re-initializing scores) it’ll overwrite the file.</li>
</ol>

<h2 id="pool-scores">Pool Scores</h2>
<p>This is a slightly more complicated workflow. It grabs an existing dictionary (make sure you run the <code class="highlighter-rouge">New Pool Opponent</code> workflow at least once first to create one), asks you to choose from a list of your opponents, updates the score (if necessary), and copies/displays it. This workflow is best used from the Today Widget (after first run). It works as follows.</p>

<ol>
  <li>The workflow gets the <code class="highlighter-rouge">Pool Scores</code> dictionary file from Workflow’s iCloud Drive directory. <strong>This file must already exist</strong>, execution will end here otherwise.</li>
  <li>The workflow gets all keys from the dictionary file. Some of these will be in the form <code class="highlighter-rouge">opponentname</code> while others will be in the form <code class="highlighter-rouge">mynameopponentname</code>. We need to get rid of the latter to present a list of opponent names.</li>
  <li>The workflow splits these keys into new lines. It then finds all the keys that begin with <code class="highlighter-rouge">myname</code> and replaces them with a blank. It then goes through and deletes all blank lines.</li>
  <li>The workflow presents this updated list of keys (opponent names) and asks you to pick one.</li>
  <li>The workflow fetches the dictionary file again, getting just the key-value pairs for you and the opponent you selected this time, and stores the values in <code class="highlighter-rouge">My Score</code> and <code class="highlighter-rouge">Opponent Score</code> variables as appropriate (with the keys again being of the form <code class="highlighter-rouge">mynameopponentname</code> and <code class="highlighter-rouge">opponentname</code>).</li>
  <li>The workflow asks you to choose from a menu: “I won”, “I lost”, or “Get score”. “I won” and “I lost” simply increment either the <code class="highlighter-rouge">My Score</code> or <code class="highlighter-rouge">Opponent Score</code> variable as appropriate, and then jumps to “Get score”.</li>
  <li>The workflow fetches the dictionary file again. It sets (updates) the dictionary value for keys <code class="highlighter-rouge">mynameopponentname</code> and <code class="highlighter-rouge">opponentname</code> with the updated score variables.</li>
  <li>The workflow saves the updated dictionary file, overwriting <code class="highlighter-rouge">Pool Scores.json</code>.</li>
  <li>The workflow copies <code class="highlighter-rouge">My Score - Opponent Score</code> to clipboard, so you can share it with your opponent if you want.</li>
  <li>The workflow displays the text <code class="highlighter-rouge">MyName MyScore-OpponentScore OpponentName</code>.</li>
</ol>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>The app keeps track of how many games you’ve won, but it doesn’t sync across devices (so iPhone and iPad keep different scores) and it doesn’t let you know your opponent’s score. I’ve also found the number to be inconsistent. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <!-- <h2 class="footer-heading">Thoughts and Stuff</h2> -->

    <div class="footer-col-wrapper">
      <div id="footer" class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            Karan Varindani
            </li>
            
            <li><c href="mailto:karan301@me.com">karan301@me.com</c></li>
            
        </ul>
     </div>

      <div class="footer-col footer-col-2">
      	Twitter
        <ul class="contact-list">
          
          <li>
            <a href="https://twitter.com/"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username"></span></a>
 <c href="http://twitter.com/karan301_">karan301_</c> 
          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <ul class="contact-list">
        	<li>Search</li>
        	<li>
				<form action="/search.html" method="get">
  					<input type="text" id="search-box" name="query">
  					<!--<input type="submit" value="Go"> -->
				</form>
			</li>
        </ul>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
